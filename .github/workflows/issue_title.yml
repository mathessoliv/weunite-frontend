name: Adicionar Número automático ao Título da Issue

on:
  issues:
    types: [opened]

jobs:
  update-title:
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Atualizar título da issue
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ISSUE_NUMBER: ${{ github.event.issue.number }}
          ISSUE_TITLE: ${{ github.event.issue.title }}
          REPOSITORY: ${{ github.repository }}
        run: |
          # Formata o número da issue para ter 3 dígitos (ex: 001, 025, 142)
          FORMATTED_NUMBER=$(printf "%03d" $ISSUE_NUMBER)
          
          # Cria o novo título no formato: #025 Título Original
          NEW_TITLE="#$FORMATTED_NUMBER $ISSUE_TITLE"
          
          # Usa o GitHub CLI nativo das Actions para editar o título
          gh issue edit $ISSUE_NUMBER --repo $REPOSITORY --title "$NEW_TITLE"
